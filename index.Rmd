---
output:
  html_document:
    theme: flatly
    css: styles.css
    toc: true
    toc_depth: 3
    toc_float:
      collapsed: false
      smooth_scroll: false
    df_print: paged
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo=FALSE, message=FALSE, warning=FALSE)
library(tidyverse) ; library(scales)
```

Climate emergency datakit
================

**More than half of UK councils have declared a 'climate emergency'. This datakit is designed to help councils address this emergency by making open data relating to climate change more discoverable.**

### Carbon dioxide emissions

Estimated CO<sub>2</sub> emissions at local authority level are published by the <a href="https://www.gov.uk/government/organisations/department-for-business-energy-and-industrial-strategy" target="_blank">Department for Business, Energy & Industrial Strategy</a> (BEIS). The data derive from the UK National Atmospheric Emissions Inventory and BEISâ€™s National Statistics of energy consumption for local authority areas. CO<sub>2</sub> emissions are measured in kilotonnes and available by different domestic, industrial and transport sectors e.g. Agricultural Combustion, Domestic Gas, Road Transport (Motorways). Emissions from aviation, shipping and military transport are not included.

<div class = "metadata">
|Indicator |Period |Geography |Source |Published |Licence |Data |
|---|---|---|---|---|---|---|
|CO<sub>2</sub> emissions |2005-2017 |Local authority |<a href="https://www.gov.uk/government/statistics/uk-local-authority-and-regional-carbon-dioxide-emissions-national-statistics-2005-to-2017" target="_blank">BEIS</a> | 2019-06-27 |<a href="http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/" target="_blank">OGL v3.0</a> |<a href="data/co2_emissions.csv" target="_blank">Data</a> |
</div>

```{r fig.retina = 3}
co2_emissions <- read_csv("data/co2_emissions.csv") %>% 
  filter(area_name == "Trafford",
         group %in% c("Domestic total", "Industry and commercial total", "Transport total")) %>% 
  mutate

ggplot(data = co2_emissions, aes(x = period, y = value, fill = group)) +
  geom_col(position = "stack") +
  scale_y_continuous(labels = comma,
                     expand = c(0.005, 0.005)) +
  scale_fill_viridis_d(direction = -1,
                       labels = c("Domestic total" = "Domestic", 
                                  "Industry and commercial total" = "Industry and commercial", 
                                  "Transport total" = "Transport")) +
  geom_hline(yintercept = 0, size = 1, colour = "#333333") +
  labs(x = NULL, 
       y = expression(paste(CO[2], " (kt)")),
       title = "Carbon dioxide emissions by sector",
       subtitle = "Trafford, 2005-2017",
       caption = "Source: BEIS",
       fill = NULL) +
  guides(fill = guide_legend(reverse = TRUE)) +
  theme_minimal(base_size = 14) +
  theme(panel.grid.minor = element_blank(),
        panel.grid.major.x = element_blank(),
        plot.title = element_text(face = "bold"),
        axis.title = element_text(size = 10, hjust = 1),
        plot.caption = element_text(color = "grey50", margin = margin(t = 20)),
        legend.position = "top", 
        legend.justification = "left") 
```

**Useful resources**    
The National Atmospheric Emissions Inventory (NAEI) website has an <a href="https://naei.beis.gov.uk/laco2app" target="_blank">interactive map</a> that allows you to explore CO<sub>2</sub> emissions by local authority area and sector.